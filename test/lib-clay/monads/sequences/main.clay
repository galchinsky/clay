import monads.sequences;
import monads;
import printer.(println);
import vectors;

main(){
    alias v = vectors.Vector[Int32];

    var seqSugar = () -> {
        with x1 = mbind(array(1,2,3));
        with x2 = mbind(array(4,5,6));
        return mreturn(x1 * x2, #v);
    };

    var seqSugar2 = () -> {
        with x1 = mbind(v());
        with x2 = mbind(array(4,5,6));
        return mreturn(x1 * x2, #v);
    };
	
    var vOfV = vectors.Vector[v](v(1,2,3),v(4,5,6), v(7,8,9));
    var sequenceVector = monads.sequence(vOfV);
    var join = monads.join(monads.forM(v(1,2,3,4,5), x -> mreturn(x * 5, #v)));

    println(seqSugar());
    println(seqSugar2());  
    println(sequenceVector);
    println(join);   
}



